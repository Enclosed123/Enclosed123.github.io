<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>webpack最佳配置指北 | Baohan.Blog | 交流与分享</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="webpack 最佳配置指北前言对于入门选手来讲，webpack 配置项很多很重，如何快速配置一个可用于线上环境的 webpack 就是一件值得思考的事情。其实熟悉 webpack 之后会发现很简单，基础的配置可以分为以下几个方面： entry 、 output 、 mode 、 resolve 、 module 、 optimization 、 plugin 、 source map 、 per">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack最佳配置指北">
<meta property="og:url" content="http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/index.html">
<meta property="og:site_name" content="Baohan.Blog | 交流与分享">
<meta property="og:description" content="webpack 最佳配置指北前言对于入门选手来讲，webpack 配置项很多很重，如何快速配置一个可用于线上环境的 webpack 就是一件值得思考的事情。其实熟悉 webpack 之后会发现很简单，基础的配置可以分为以下几个方面： entry 、 output 、 mode 、 resolve 、 module 、 optimization 、 plugin 、 source map 、 per">
<meta property="og:locale" content="cn">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a8ecb33f1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a96e6015e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a97e1ea29?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="og:image" content="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a96f24646?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
<meta property="article:published_time" content="2020-01-03T09:12:02.278Z">
<meta property="article:modified_time" content="2020-01-03T09:13:16.165Z">
<meta property="article:author" content="包寒">
<meta property="article:tag" content="个人博客">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a8ecb33f1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1">
    
        <link rel="alternate" type="application/atom+xml" title="Baohan.Blog | 交流与分享" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/home_128px_1237716_easyicon.net.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/006Zw1yCly1fxmsomzdvoj30u016de83.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">包寒</h5>
          <a href="mailto:373751805@qq.com" title="373751805@qq.com" class="mail">373751805@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Enclosed123" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://juejin.im/user/5d7e6fd56fb9a06ae61ae7e6" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">webpack最佳配置指北</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">webpack最佳配置指北</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-01-03T09:12:02.278Z" itemprop="datePublished" class="page-time">
  2020-01-03
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#webpack-最佳配置指北"><span class="post-toc-number">1.</span> <span class="post-toc-text">webpack 最佳配置指北</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一、配置入口-entry"><span class="post-toc-number">1.0.2.</span> <span class="post-toc-text">一、配置入口 entry</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1、单入口和多入口"><span class="post-toc-number">1.0.2.1.</span> <span class="post-toc-text">1、单入口和多入口</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-动态配置入口文件"><span class="post-toc-number">1.0.2.2.</span> <span class="post-toc-text">2. 动态配置入口文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#动态打包所有子项目"><span class="post-toc-number">1.0.2.2.1.</span> <span class="post-toc-text">动态打包所有子项目</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#动态打包某一子项目"><span class="post-toc-number">1.0.2.2.2.</span> <span class="post-toc-text">动态打包某一子项目</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#二、配置出口-output"><span class="post-toc-number">1.0.3.</span> <span class="post-toc-text">二、配置出口 output</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-浏览器缓存与-hash-值"><span class="post-toc-number">1.0.3.1.</span> <span class="post-toc-text">1. 浏览器缓存与 hash 值</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#hash"><span class="post-toc-number">1.0.3.1.1.</span> <span class="post-toc-text">hash</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#chunkhash"><span class="post-toc-number">1.0.3.1.2.</span> <span class="post-toc-text">chunkhash</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#contenthash"><span class="post-toc-number">1.0.3.1.3.</span> <span class="post-toc-text">contenthash</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#注意："><span class="post-toc-number">1.0.3.1.4.</span> <span class="post-toc-text">注意：</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-打包成库"><span class="post-toc-number">1.0.3.2.</span> <span class="post-toc-text">2. 打包成库</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三、配置模式-mode（webpack4）"><span class="post-toc-number">1.0.4.</span> <span class="post-toc-text">三、配置模式 mode（webpack4）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-production"><span class="post-toc-number">1.0.4.1.</span> <span class="post-toc-text">1. production</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-development"><span class="post-toc-number">1.0.4.2.</span> <span class="post-toc-text">2. development</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-none"><span class="post-toc-number">1.0.4.3.</span> <span class="post-toc-text">3. none</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-production、-development、none-总结"><span class="post-toc-number">1.0.4.4.</span> <span class="post-toc-text">4. production、 development、none 总结</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-环境变量-process-env-NODE-ENV"><span class="post-toc-number">1.0.4.5.</span> <span class="post-toc-text">5. 环境变量 process.env.NODE_ENV</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#四、配置解析策略-resolve"><span class="post-toc-number">1.0.5.</span> <span class="post-toc-text">四、配置解析策略 resolve</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#五、配置解析和转换文件的策略-module"><span class="post-toc-number">1.0.6.</span> <span class="post-toc-text">五、配置解析和转换文件的策略 module</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-noParse"><span class="post-toc-number">1.0.6.1.</span> <span class="post-toc-text">1. noParse</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-rules"><span class="post-toc-number">1.0.6.2.</span> <span class="post-toc-text">2. rules</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#六、配置优化-optimization（webpack4）"><span class="post-toc-number">1.0.7.</span> <span class="post-toc-text">六、配置优化 optimization（webpack4）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-最小化包"><span class="post-toc-number">1.0.7.1.</span> <span class="post-toc-text">1. 最小化包</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-拆包"><span class="post-toc-number">1.0.7.2.</span> <span class="post-toc-text">2. 拆包</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#拆分-node-modules"><span class="post-toc-number">1.0.7.2.1.</span> <span class="post-toc-text">拆分 node_modules</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#拆分业务代码"><span class="post-toc-number">1.0.7.2.2.</span> <span class="post-toc-text">拆分业务代码</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#拆分第三方库"><span class="post-toc-number">1.0.7.2.3.</span> <span class="post-toc-text">拆分第三方库</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#动态加载"><span class="post-toc-number">1.0.7.2.4.</span> <span class="post-toc-text">动态加载</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#七、配置-plugin"><span class="post-toc-number">1.0.8.</span> <span class="post-toc-text">七、配置 plugin</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#八、配置devtool：source-map"><span class="post-toc-number">1.0.9.</span> <span class="post-toc-text">八、配置devtool：source map</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#九、配置性能-performance"><span class="post-toc-number">1.0.10.</span> <span class="post-toc-text">九、配置性能 performance</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#十、配置其它"><span class="post-toc-number">1.0.11.</span> <span class="post-toc-text">十、配置其它</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-watch-与-watchOptions"><span class="post-toc-number">1.0.11.1.</span> <span class="post-toc-text">1. watch 与 watchOptions</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#watch"><span class="post-toc-number">1.0.11.1.1.</span> <span class="post-toc-text">watch</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#watchOptions"><span class="post-toc-number">1.0.11.1.2.</span> <span class="post-toc-text">watchOptions</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-externals"><span class="post-toc-number">1.0.11.2.</span> <span class="post-toc-text">2. externals</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-target"><span class="post-toc-number">1.0.11.3.</span> <span class="post-toc-text">3.target</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-cache"><span class="post-toc-number">1.0.11.4.</span> <span class="post-toc-text">4. cache</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-name"><span class="post-toc-number">1.0.11.5.</span> <span class="post-toc-text">5. name</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#转载自掘金"><span class="post-toc-number">1.0.12.</span> <span class="post-toc-text">转载自掘金</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-webpack最佳配置指北"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">webpack最佳配置指北</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-01-03 17:12:02" datetime="2020-01-03T09:12:02.278Z"  itemprop="datePublished">2020-01-03</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="webpack-最佳配置指北"><a href="#webpack-最佳配置指北" class="headerlink" title="webpack 最佳配置指北"></a>webpack 最佳配置指北</h1><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>对于入门选手来讲，webpack 配置项很多很重，如何快速配置一个可用于线上环境的 webpack 就是一件值得思考的事情。其实熟悉 webpack 之后会发现很简单，基础的配置可以分为以下几个方面： <code>entry</code> 、 <code>output</code> 、 <code>mode</code> 、 <code>resolve</code> 、 <code>module</code> 、 <code>optimization</code> 、 <code>plugin</code> 、 <code>source map</code> 、 <code>performance</code> 等，本文就来重点分析下这些部分。</p>
<p>内附一张 webpack 零配置对比图片，关注公众号【前端瓶子君】回复【webpack】免费获取pdf文件。</p>
<h3 id="一、配置入口-entry"><a href="#一、配置入口-entry" class="headerlink" title="一、配置入口 entry"></a>一、配置入口 entry</h3><h4 id="1、单入口和多入口"><a href="#1、单入口和多入口" class="headerlink" title="1、单入口和多入口"></a>1、单入口和多入口</h4><p>将源文件加入到 webpack 构建流程，可以是单入口:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#96;.&#x2F;index.js&#96;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>构建包名称 <code>[name]</code>为 <code>main</code> ；</p>
<p>或多入口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#123; </span><br><span class="line">    &quot;index&quot;: &#96;.&#x2F;index.js&#96;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><code>key:value</code> 键值对的形式：</p>
<ul>
<li>key：构建包名称，即 <code>[name]</code> ，在这里为 <code>index</code></li>
<li>value：入口路径</li>
</ul>
<p>入口决定 webapck 从哪个模块开始生成依赖关系图（构建包），每一个入口文件都对应着一个依赖关系图。</p>
<h4 id="2-动态配置入口文件"><a href="#2-动态配置入口文件" class="headerlink" title="2. 动态配置入口文件"></a>2. 动态配置入口文件</h4><h5 id="动态打包所有子项目"><a href="#动态打包所有子项目" class="headerlink" title="动态打包所有子项目"></a>动态打包所有子项目</h5><p>当构建项目包含多个子项目时，每次增加一个子系统都需要将入口文件写入 webpack 配置文件中，其实我们让webpack 动态获取入口文件，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 使用 glob 等工具使用若干通配符，运行时获得 entry 的条目</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: glob.sync(&#39;.&#x2F;project&#x2F;**&#x2F;index.js&#39;).reduce((acc, path) &#x3D;&gt; &#123;</span><br><span class="line">    const entry &#x3D; path.replace(&#39;&#x2F;index.js&#39;, &#39;&#39;)</span><br><span class="line">    acc[entry] &#x3D; path</span><br><span class="line">    return acc</span><br><span class="line">  &#125;, &#123;&#125;),</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>则会将所有匹配 <code>./project/**/index.js</code> 的文件作为入口文件进行打包，如果你想要增加一个子项目，仅仅需要在 <code>project</code> 创建一个子项目目录，并创建一个 <code>index.js</code> 作为入口文件即可。</p>
<p>这种方式比较适合入口文件不集中且较多的场景。</p>
<h5 id="动态打包某一子项目"><a href="#动态打包某一子项目" class="headerlink" title="动态打包某一子项目"></a>动态打包某一子项目</h5><p>在构建多系统应用或组件库时，我们每次打包可能仅仅需要打包某一模块，此时，可以通过命令行的形式请求打印某一模块，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build --project components</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在打包的时候解析命令行参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 解析命令行参数</span><br><span class="line">const argv &#x3D; require(&#39;minimist&#39;)(process.argv.slice(2))</span><br><span class="line">&#x2F;&#x2F; 项目</span><br><span class="line">const project &#x3D; argv[&#39;project&#39;] || &#39;index&#39;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>然后配置入口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#123; </span><br><span class="line">    &quot;index&quot;: &#96;.&#x2F;$&#123;project&#125;&#x2F;index.js&#96;,</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>相当于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#123; </span><br><span class="line">    &quot;index&quot;: &#96;.&#x2F;components&#x2F;index.js&#96;,</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>当然，你可以传入其它参数，也可以应用于多个地方，例如 <code>resolve.alias</code> 中。</p>
<h3 id="二、配置出口-output"><a href="#二、配置出口-output" class="headerlink" title="二、配置出口 output"></a>二、配置出口 output</h3><p>用于告知 webpack 如何构建编译后的文件，可以自定义输出文件的位置和名称:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  output: &#123; </span><br><span class="line">    &#x2F;&#x2F; path 必须为绝对路径</span><br><span class="line">    &#x2F;&#x2F; 输出文件路径</span><br><span class="line">    path: path.resolve(__dirname, &#39;..&#x2F;..&#x2F;dist&#x2F;build&#39;),</span><br><span class="line">    &#x2F;&#x2F; 包名称</span><br><span class="line">    filename: &quot;[name].bundle.js&quot;,</span><br><span class="line">    &#x2F;&#x2F; 或使用函数返回名(不常用)</span><br><span class="line">    &#x2F;&#x2F; filename: (chunkData) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F;   return chunkData.chunk.name &#x3D;&#x3D;&#x3D; &#39;main&#39; ? &#39;[name].js&#39;: &#39;[name]&#x2F;[name].js&#39;;</span><br><span class="line">    &#x2F;&#x2F; &#125;,</span><br><span class="line">    &#x2F;&#x2F; 块名，公共块名(非入口)</span><br><span class="line">    chunkFilename: &#39;[name].[chunkhash].bundle.js&#39;,</span><br><span class="line">    &#x2F;&#x2F; 打包生成的 index.html 文件里面引用资源的前缀</span><br><span class="line">    &#x2F;&#x2F; 也为发布到线上资源的 URL 前缀</span><br><span class="line">    &#x2F;&#x2F; 使用的是相对路径，默认为 &#39;&#39;</span><br><span class="line">    publicPath: &#39;&#x2F;&#39;, </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在 webpack4 开发模式下，会默认启动 <code>output.pathinfo</code> ，它会输出一些额外的注释信息，对项目调试非常有用，尤其是使用 eval devtool 时。</p>
<p><code>filename</code> ：<code>[name]</code> 为 entry 配置的 <code>key</code>，除此之外，还可以是 <code>[id]</code> （内部块 id ）、 <code>[hash]</code>、<code>[contenthash]</code> 等。</p>
<h4 id="1-浏览器缓存与-hash-值"><a href="#1-浏览器缓存与-hash-值" class="headerlink" title="1. 浏览器缓存与 hash 值"></a>1. 浏览器缓存与 hash 值</h4><p>对于我们开发的每一个应用，浏览器都会对静态资源进行缓存，如果我们更新了静态资源，而没有更新静态资源名称（或路径），浏览器就可能因为缓存的问题获取不到更新的资源。在我们使用 webpack 进行打包的时候，webpack 提供了 hash 的概念，所以我们可以使用 hash 来打包。</p>
<p>在定义包名称（例如 <code>chunkFilename</code> 、 <code>filename</code>），我们一般会用到哈希值，不同的哈希值使用的场景不同：</p>
<h5 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h5><p>build-specific， 哈希值对应每一次构建（ <code>Compilation</code> ），即每次编译都不同，即使文件内容都没有改变，并且所有的资源都共享这一个哈希值，此时，浏览器缓存就没有用了，<strong>可以用在开发环境，生产环境不适用。</strong></p>
<h5 id="chunkhash"><a href="#chunkhash" class="headerlink" title="chunkhash"></a>chunkhash</h5><p>chunk-specific， 哈希值对应于 webpack 每个入口点，每个入口都有自己的哈希值。如果在某一入口文件创建的关系依赖图上存在文件内容发生了变化，那么相应入口文件的 <code>chunkhash</code> 才会发生变化，<strong>适用于生产环境</strong></p>
<h5 id="contenthash"><a href="#contenthash" class="headerlink" title="contenthash"></a>contenthash</h5><p>content-specific，根据包内容计算出的哈希值，只要包内容不变，<code>contenthash</code> 就不变，<strong>适用于生产环境</strong></p>
<p>但我们会发现，有时内容没有变更，打包时 <code>[contenthash]</code> 反而变更了的问题，</p>
<p>webpack 也允许哈希的切片。如果你写 <code>[hash:8]</code> ，那么它会获取哈希值的前 8 位。</p>
<h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><ul>
<li>尽量在生产环境使用哈希</li>
<li>按需加载的块不受 <code>filename</code> 影响，受 <code>chunkFilename</code> 影响</li>
<li>使用 <code>hash/chunkhash/contenthash</code> 一般会配合 <code>html-webpack-plugin</code> （创建 html ，并捆绑相应的打包文件） 、<code>clean-webpack-plugin</code> （清除原有打包文件） 一起使用。</li>
</ul>
<h4 id="2-打包成库"><a href="#2-打包成库" class="headerlink" title="2. 打包成库"></a>2. 打包成库</h4><p>当使用 webapck 构建一个可以被其它模块引用的库时：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  output: &#123; </span><br><span class="line">    &#x2F;&#x2F; path 必须为绝对路径</span><br><span class="line">    &#x2F;&#x2F; 输出文件路径</span><br><span class="line">    path: path.resolve(__dirname, &#39;..&#x2F;..&#x2F;dist&#x2F;build&#39;),</span><br><span class="line">    &#x2F;&#x2F; 包名称</span><br><span class="line">    filename: &quot;[name].bundle.js&quot;,</span><br><span class="line">    &#x2F;&#x2F; 块名，公共块名(非入口)</span><br><span class="line">    chunkFilename: &#39;[name].[chunkhash].bundle.js&#39;,</span><br><span class="line">    &#x2F;&#x2F; 打包生成的 index.html 文件里面引用资源的前缀</span><br><span class="line">    &#x2F;&#x2F; 也为发布到线上资源的 URL 前缀</span><br><span class="line">    &#x2F;&#x2F; 使用的是相对路径，默认为 &#39;&#39;</span><br><span class="line">    publicPath: &#39;&#x2F;&#39;, </span><br><span class="line">    &#x2F;&#x2F; 一旦设置后该 bundle 将被处理为 library</span><br><span class="line">    library: &#39;webpackNumbers&#39;,</span><br><span class="line">    &#x2F;&#x2F; export 的 library 的规范，有支持 var, this, commonjs,commonjs2,amd,umd</span><br><span class="line">    libraryTarget: &#39;umd&#39;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="三、配置模式-mode（webpack4）"><a href="#三、配置模式-mode（webpack4）" class="headerlink" title="三、配置模式 mode（webpack4）"></a>三、配置模式 mode（webpack4）</h3><p>设置 <code>mode</code> ，可以让 webpack 自动调起相应的内置优化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; 可以是 none、development、production</span><br><span class="line">  &#x2F;&#x2F; 默认为 production</span><br><span class="line">  mode: &#39;production&#39;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>或在命令行里配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;build:prod&quot;: &quot;webpack --config config&#x2F;webpack.prod.config.js --mode production&quot;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在设置了 <code>mode</code> 之后，webpack4 会同步配置 <code>process.env.NODE_ENV</code> 为 <code>development</code> 或 <code>production</code> 。</p>
<p>webpack4 最引人注目的主要是：</p>
<ul>
<li><p>减小编译时间</p>
<p>打包时间减小了超过 60%</p>
</li>
<li><p>零配置</p>
<p>我们可以在没有任何配置文件的情况下将 webpack 用于各种项目</p>
</li>
</ul>
<p>webpack4 支持零配置使用，这里的零配置就是指，<code>mode</code> 以及 <code>entry</code> （默认为 <code>src/index.js</code>）都可以通过入口文件指定，并且 webpack4 针对对不同的 <code>mode</code> 内置相应的优化策略。</p>
<h4 id="1-production"><a href="#1-production" class="headerlink" title="1. production"></a>1. production</h4><p>配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.prod.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  mode: &#39;production&#39;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>相当于默认内置了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.prod.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  performance: &#123;</span><br><span class="line">    &#x2F;&#x2F; 性能设置,文件打包过大时，会报警告</span><br><span class="line">    hints: &#39;warning&#39;</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    &#x2F;&#x2F; 打包时，在包中不包含所属模块的信息的注释</span><br><span class="line">    pathinfo: false</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    &#x2F;&#x2F; 不使用可读的模块标识符进行调试</span><br><span class="line">    namedModules: false,</span><br><span class="line">    &#x2F;&#x2F; 不使用可读的块标识符进行调试</span><br><span class="line">    namedChunks: false,</span><br><span class="line">    &#x2F;&#x2F; 设置 process.env.NODE_ENV 为 production</span><br><span class="line">    nodeEnv: &#39;production&#39;,</span><br><span class="line">    &#x2F;&#x2F; 标记块是否是其它块的子集</span><br><span class="line">    &#x2F;&#x2F; 控制加载块的大小（加载较大块时，不加载其子集）</span><br><span class="line">    flagIncludedChunks: true,</span><br><span class="line">    &#x2F;&#x2F; 标记模块的加载顺序，使初始包更小</span><br><span class="line">    occurrenceOrder: true,</span><br><span class="line">    &#x2F;&#x2F; 启用副作用</span><br><span class="line">    sideEffects: true,</span><br><span class="line">    &#x2F;&#x2F; 确定每个模块的使用导出，</span><br><span class="line">    &#x2F;&#x2F; 不会为未使用的导出生成导出</span><br><span class="line">    &#x2F;&#x2F; 最小化的消除死代码</span><br><span class="line">    &#x2F;&#x2F; optimization.usedExports 收集的信息将被其他优化或代码生成所使用</span><br><span class="line">    usedExports: true,</span><br><span class="line">    &#x2F;&#x2F; 查找模块图中可以安全的连接到其它模块的片段</span><br><span class="line">    concatenateModules: true,</span><br><span class="line">    &#x2F;&#x2F; SplitChunksPlugin 配置项</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      &#x2F;&#x2F; 默认 webpack4 只会对按需加载的代码做分割</span><br><span class="line">      chunks: &#39;async&#39;,</span><br><span class="line">      &#x2F;&#x2F; 表示在压缩前的最小模块大小,默认值是30kb</span><br><span class="line">      minSize: 30000,</span><br><span class="line">      minRemainingSize: 0,</span><br><span class="line">      &#x2F;&#x2F; 旨在与HTTP&#x2F;2和长期缓存一起使用 </span><br><span class="line">      &#x2F;&#x2F; 它增加了请求数量以实现更好的缓存</span><br><span class="line">      &#x2F;&#x2F; 它还可以用于减小文件大小，以加快重建速度。</span><br><span class="line">      maxSize: 0,</span><br><span class="line">      &#x2F;&#x2F; 分割一个模块之前必须共享的最小块数</span><br><span class="line">      minChunks: 1,</span><br><span class="line">      &#x2F;&#x2F; 按需加载时的最大并行请求数</span><br><span class="line">      maxAsyncRequests: 6,</span><br><span class="line">      &#x2F;&#x2F; 入口的最大并行请求数</span><br><span class="line">      maxInitialRequests: 4,</span><br><span class="line">      &#x2F;&#x2F; 界定符</span><br><span class="line">      automaticNameDelimiter: &#39;~&#39;,</span><br><span class="line">      &#x2F;&#x2F; 块名最大字符数</span><br><span class="line">      automaticNameMaxLength: 30,</span><br><span class="line">      cacheGroups: &#123; &#x2F;&#x2F; 缓存组</span><br><span class="line">        vendors: &#123;</span><br><span class="line">          test: &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;,</span><br><span class="line">          priority: -10</span><br><span class="line">        &#125;,</span><br><span class="line">        default: &#123;</span><br><span class="line">          minChunks: 2,</span><br><span class="line">          priority: -20,</span><br><span class="line">          reuseExistingChunk: true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 当打包时，遇到错误编译，将不会把打包文件输出</span><br><span class="line">    &#x2F;&#x2F; 确保 webpack 不会输入任何错误的包</span><br><span class="line">    noEmitOnErrors: true,</span><br><span class="line">    checkWasmTypes: true,</span><br><span class="line">    &#x2F;&#x2F; 使用 optimization.minimizer || TerserPlugin 来最小化包</span><br><span class="line">    minimize: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#x2F;&#x2F; 使用 terser 来优化 JavaScript</span><br><span class="line">    new TerserPlugin(&#x2F;* ... *&#x2F;),</span><br><span class="line">    &#x2F;&#x2F; 定义环境变量</span><br><span class="line">    new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;production&quot;) &#125;),</span><br><span class="line">    &#x2F;&#x2F; 预编译所有模块到一个闭包中，提升代码在浏览器中的执行速度</span><br><span class="line">    new webpack.optimize.ModuleConcatenationPlugin(),</span><br><span class="line">    &#x2F;&#x2F; 在编译出现错误时，使用 NoEmitOnErrorsPlugin 来跳过输出阶段。</span><br><span class="line">    &#x2F;&#x2F; 这样可以确保输出资源不会包含错误</span><br><span class="line">    new webpack.NoEmitOnErrorsPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="2-development"><a href="#2-development" class="headerlink" title="2. development"></a>2. development</h4><p>配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.dev.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  mode: &#39;development&#39;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>相当于默认内置了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.dev.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  devtool: &#39;eval&#39;,</span><br><span class="line">  cache: true,</span><br><span class="line">  performance: &#123;</span><br><span class="line">    &#x2F;&#x2F; 性能设置,文件打包过大时，不报错和警告，只做提示</span><br><span class="line">    hints: false</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    &#x2F;&#x2F; 打包时，在包中包含所属模块的信息的注释</span><br><span class="line">    pathinfo: true</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    &#x2F;&#x2F; 使用可读的模块标识符进行调试</span><br><span class="line">    namedModules: true,</span><br><span class="line">    &#x2F;&#x2F; 使用可读的块标识符进行调试</span><br><span class="line">    namedChunks: true,</span><br><span class="line">    &#x2F;&#x2F; 设置 process.env.NODE_ENV 为 development</span><br><span class="line">    nodeEnv: &#39;development&#39;,</span><br><span class="line">    &#x2F;&#x2F; 不标记块是否是其它块的子集</span><br><span class="line">    flagIncludedChunks: false,</span><br><span class="line">    &#x2F;&#x2F; 不标记模块的加载顺序</span><br><span class="line">    occurrenceOrder: false,</span><br><span class="line">    &#x2F;&#x2F; 不启用副作用</span><br><span class="line">    sideEffects: false,</span><br><span class="line">    usedExports: false,</span><br><span class="line">    concatenateModules: false,</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      hidePathInfo: false,</span><br><span class="line">      minSize: 10000,</span><br><span class="line">      maxAsyncRequests: Infinity,</span><br><span class="line">      maxInitialRequests: Infinity,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 当打包时，遇到错误编译，仍把打包文件输出</span><br><span class="line">    noEmitOnErrors: false,</span><br><span class="line">    checkWasmTypes: false,</span><br><span class="line">    &#x2F;&#x2F; 不使用 optimization.minimizer || TerserPlugin 来最小化包</span><br><span class="line">    minimize: false,</span><br><span class="line">    removeAvailableModules: false</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#x2F;&#x2F; 当启用 HMR 时，使用该插件会显示模块的相对路径</span><br><span class="line">    &#x2F;&#x2F; 建议用于开发环境</span><br><span class="line">    new webpack.NamedModulesPlugin(),</span><br><span class="line">    &#x2F;&#x2F; webpack 内部维护了一个自增的 id，每个 chunk 都有一个 id。</span><br><span class="line">    &#x2F;&#x2F; 所以当增加 entry 或者其他类型 chunk 的时候，id 就会变化，</span><br><span class="line">    &#x2F;&#x2F; 导致内容没有变化的 chunk 的 id 也发生了变化</span><br><span class="line">    &#x2F;&#x2F; NamedChunksPlugin 将内部 chunk id 映射成一个字符串标识符（模块的相对路径）</span><br><span class="line">    &#x2F;&#x2F; 这样 chunk id 就稳定了下来</span><br><span class="line">    new webpack.NamedChunksPlugin(),</span><br><span class="line">    &#x2F;&#x2F; 定义环境变量</span><br><span class="line">    new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;development&quot;) &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="3-none"><a href="#3-none" class="headerlink" title="3. none"></a>3. none</h4><p>不进行任何默认优化选项。</p>
<p>配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.com.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  mode: &#39;none&#39;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>相当于默认内置了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.com.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  performance: &#123;</span><br><span class="line">   &#x2F;&#x2F; 性能设置,文件打包过大时，不报错和警告，只做提示</span><br><span class="line">   hints: false</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    &#x2F;&#x2F; 不标记块是否是其它块的子集</span><br><span class="line">    flagIncludedChunks: false,</span><br><span class="line">    &#x2F;&#x2F; 不标记模块的加载顺序</span><br><span class="line">    occurrenceOrder: false,</span><br><span class="line">    &#x2F;&#x2F; 不启用副作用</span><br><span class="line">    sideEffects: false,</span><br><span class="line">    usedExports: false,</span><br><span class="line">    concatenateModules: false,</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      hidePathInfo: false,</span><br><span class="line">      minSize: 10000,</span><br><span class="line">      maxAsyncRequests: Infinity,</span><br><span class="line">      maxInitialRequests: Infinity,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 当打包时，遇到错误编译，仍把打包文件输出</span><br><span class="line">    noEmitOnErrors: false,</span><br><span class="line">    checkWasmTypes: false,</span><br><span class="line">    &#x2F;&#x2F; 不使用 optimization.minimizer || TerserPlugin 来最小化包</span><br><span class="line">    minimize: false,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: []</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="4-production、-development、none-总结"><a href="#4-production、-development、none-总结" class="headerlink" title="4. production、 development、none 总结"></a>4. production、 development、none 总结</h4><p><img src="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a8ecb33f1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a96e6015e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a97e1ea29?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>

<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://user-gold-cdn.xitu.io/2020/1/2/16f66f3a96f24646?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img" title="">
                </div>
                <div class="image-caption">img</div>
            </figure>

<p>注意：关注公众号【前端瓶子君】回复【webpack】免费获取pdf原文件。</p>
<p><strong>production 模式下给你更好的用户体验：</strong></p>
<ul>
<li>较小的输出包体积</li>
<li>浏览器中更快的代码执行速度</li>
<li>忽略开发中的代码</li>
<li>不公开源代码或文件路径</li>
<li>易于使用的输出资产</li>
</ul>
<p><strong>development 模式会给予你最好的开发体验：</strong></p>
<ul>
<li>浏览器调试工具</li>
<li>快速增量编译可加快开发周期</li>
<li>运行时提供有用的错误消息</li>
</ul>
<p>尽管 webpack4 在尽力让零配置做到更多，但仍然是有限度的，大多数情况下还是需要一个配置文件。我们可以在项目的初期使用零配置，在后期业务复杂的时候再配置。</p>
<h4 id="5-环境变量-process-env-NODE-ENV"><a href="#5-环境变量-process-env-NODE-ENV" class="headerlink" title="5. 环境变量 process.env.NODE_ENV"></a>5. 环境变量 process.env.NODE_ENV</h4><p>第三方框架或库，以及我们的业务代码，都会针对不同的环境配置，执行不同的逻辑代码，例如：</p>
<p>我们可以通过以下方式定义环境变量：</p>
<p><strong>方法一：webpack4 中 mode: ‘production’ 已经默认配置了 process.env.NODE_ENV = ‘production’ ，所以 webapck4 可以不定义</strong></p>
<p>尽管 webpack4 中定义 <code>mode</code> 会自动配置 <code>process.env.NODE_ENV</code> ，那么我们就不需要手动配置环境变量了吗？</p>
<p>其实不然，<code>mode</code> 只可以定义成 <code>development</code> 或 <code>production</code> ，而在项目中，我们不仅仅只有开发或生产环境，很多情况下需要配置不同的环境（例如测试环境），此时我们就需要手动配置其它环境变量（例如测试环境，就需要定义 <code>process.env.NODE_ENV</code> 为 <code>&#39;test&#39;</code> ），你可以采取以下方式：</p>
<p><strong>方法二：webpack.DefinePlugin</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack编译过程中设置全局变量process.env</span><br><span class="line">new webpack.DefinePlugin(&#123;</span><br><span class="line">  &#39;process.env&#39;: require(&#39;..&#x2F;config&#x2F;dev.env.js&#39;)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><code>config/prod.env.js</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D;&#123;</span><br><span class="line">  &#x2F;&#x2F; 或  &#39;&quot;production&quot;&#39; ，环境变量的值需要是一个由双引号包裹的字符串</span><br><span class="line">  NODE_ENV: JSON.stringify(&#39;production&#39;) </span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>方法三：webpack 命令时， NODE_ENV=development</strong></p>
<p>在 window 中配置 <code>NODE_ENV=production</code> 可能会卡住，所以使用 cross-env：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cross-env NODE_ENV&#x3D;production webpack --config webpack.config.prod.js</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>方法四：使用 <code>new webpack.EnvironmentPlugin([&#39;NODE_ENV&#39;])</code></strong></p>
<p><code>EnvironmentPlugin</code> 是一个通过 <code>webpack.DefinePlugin</code> 来设置 <code>process.env</code> 环境变量的快捷方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new webpack.EnvironmentPlugin(&#123;</span><br><span class="line">  NODE_ENV: &#39;production&#39;,</span><br><span class="line">&#125;);</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>注意：上面其实是给 <code>NODE_ENV</code> 设置一个默认值 <code>&#39;production&#39;</code> ，如果其它地方有定义 <code>process.env.NODE_ENV</code> ，则该默认值无效。</p>
<h3 id="四、配置解析策略-resolve"><a href="#四、配置解析策略-resolve" class="headerlink" title="四、配置解析策略 resolve"></a>四、配置解析策略 resolve</h3><p>自定义寻找依赖模块时的策略（例如 <code>import _ from &#39;lodash&#39;</code>）:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    &#x2F;&#x2F; 设置模块导入规则，import&#x2F;require时会直接在这些目录找文件</span><br><span class="line">    &#x2F;&#x2F; 可以指明存放第三方模块的绝对路径，以减少寻找，</span><br><span class="line">    &#x2F;&#x2F; 默认 node_modules</span><br><span class="line">    modules: [path.resolve(&#96;$&#123;project&#125;&#x2F;components&#96;), &#39;node_modules&#39;],</span><br><span class="line">    &#x2F;&#x2F; import导入时省略后缀</span><br><span class="line">    &#x2F;&#x2F; 注意：尽可能的减少后缀尝试的可能性</span><br><span class="line">    extensions: [&#39;.js&#39;, &#39;.jsx&#39;, &#39;.react.js&#39;, &#39;.css&#39;, &#39;.json&#39;],</span><br><span class="line">    &#x2F;&#x2F; import导入时别名，减少耗时的递归解析操作</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &#39;@components&#39;: path.resolve(&#96;$&#123;project&#125;&#x2F;components&#96;),</span><br><span class="line">      &#39;@style&#39;: path.resolve(&#39;asset&#x2F;style&#39;),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 很多第三方库会针对不同的环境提供几份代码</span><br><span class="line">    &#x2F;&#x2F; webpack 会根据 mainFields 的配置去决定优先采用那份代码</span><br><span class="line">    &#x2F;&#x2F; 它会根据 webpack 配置中指定的 target 不同，默认值也会有所不同</span><br><span class="line">    mainFields: [&#39;browser&#39;, &#39;module&#39;, &#39;main&#39;],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="五、配置解析和转换文件的策略-module"><a href="#五、配置解析和转换文件的策略-module" class="headerlink" title="五、配置解析和转换文件的策略 module"></a>五、配置解析和转换文件的策略 module</h3><p>决定如何处理项目中不同类型的模块，通常是配置 module.rules 里的 Loader:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  module: &#123;</span><br><span class="line">    &#x2F;&#x2F; 指明 webpack 不去解析某些内容，该方式有助于提升 webpack 的构建性能</span><br><span class="line">    noParse: &#x2F;jquery&#x2F;,</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        &#x2F;&#x2F; 这里编译 js、jsx</span><br><span class="line">        &#x2F;&#x2F; 注意：如果项目源码中没有 jsx 文件就不要写 &#x2F;\.jsx?$&#x2F;，提升正则表达式性能</span><br><span class="line">        test: &#x2F;\.(js|jsx)$&#x2F;,</span><br><span class="line">        &#x2F;&#x2F; 指定要用什么 loader 及其相关 loader 配置</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: &quot;babel-loader&quot;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            &#x2F;&#x2F; babel-loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启</span><br><span class="line">            &#x2F;&#x2F; 使用 cacheDirectory 选项将 babel-loader 的速度提高2倍</span><br><span class="line">      		cacheDirectory: true,</span><br><span class="line">      		&#x2F;&#x2F; Save disk space when time isn&#39;t as important</span><br><span class="line">      		cacheCompression: true,</span><br><span class="line">      		compact: true,     </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F; 排除 node_modules 目录下的文件</span><br><span class="line">        &#x2F;&#x2F; node_modules 目录下的文件都是采用的 ES5 语法，没必要再通过 Babel 去转换</span><br><span class="line">        exclude: &#x2F;node_modules&#x2F;</span><br><span class="line">        &#x2F;&#x2F; 也可以配置 include：需要引入的文件</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="1-noParse"><a href="#1-noParse" class="headerlink" title="1. noParse"></a>1. noParse</h4><p>指明 webpack 不去解析某些内容，该方式有助于提升 webpack 的构建性能。</p>
<h4 id="2-rules"><a href="#2-rules" class="headerlink" title="2. rules"></a>2. rules</h4><p>常见的 loader 有：</p>
<ul>
<li><p><code>babel-loader</code>：解析 <code>.js</code> 和 <code>.jsx</code> 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 配置 .babelrc</span><br><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;@babel&#x2F;preset-env&quot;,</span><br><span class="line">    ],</span><br><span class="line">    &quot;@babel&#x2F;preset-react&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [</span><br><span class="line">      &quot;@babel&#x2F;plugin-proposal-class-properties&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;loose&quot;: true</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">      &quot;@babel&#x2F;plugin-transform-runtime&quot;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;absoluteRuntime&quot;: false,</span><br><span class="line">        &quot;corejs&quot;: false,</span><br><span class="line">        &quot;helpers&quot;: true,</span><br><span class="line">        &quot;regenerator&quot;: true,</span><br><span class="line">        &quot;useESModules&quot;: false</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>tsx-loader</code>：处理 ts 文件</p>
</li>
<li><p><code>less-loader</code>：处理 less 文件，并将其编译为 css</p>
</li>
<li><p><code>sass-loader</code>：处理 sass、scss 文件，并将其编译为 css</p>
</li>
<li><p><code>postcss-loader</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; postcss.config.js</span><br><span class="line">module.exports &#x3D; &#123; &#x2F;&#x2F; 解析CSS文件并且添加浏览器前缀到 CSS 内容里</span><br><span class="line">	plugins: [require(&#39;autoprefixer&#39;)],</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>css-loader</code>：处理 css 文件</p>
</li>
<li><p><code>style-loader</code>：将 css 注入到 DOM</p>
</li>
<li><p><code>file-loader</code>：将文件上的<code>import</code> / <code>require</code> 解析为 <code>url</code>，并将该文件输出到输出目录中</p>
</li>
<li><p><code>url-loader</code>：用于将文件转换成 base64 uri 的 webpack 加载程序</p>
</li>
<li><p><code>html-loader</code>：将 HTML 导出为字符串， 当编译器要求时，将 HTML 最小化</p>
</li>
</ul>
<p>更多 loaders 可查看 <a href="https://webpack.js.org/loaders/" target="_blank" rel="noopener">LOADERS</a> 。</p>
<h3 id="六、配置优化-optimization（webpack4）"><a href="#六、配置优化-optimization（webpack4）" class="headerlink" title="六、配置优化 optimization（webpack4）"></a>六、配置优化 optimization（webpack4）</h3><p>webapck4 会根据你所选择的 <code>mode</code> 进行优化，你可以手动配置，它将会覆盖自动优化，详细配置请见 <a href="https://webpack.js.org/configuration/optimization/#optimizationminimizer" target="_blank" rel="noopener">Optimization</a> 。</p>
<p>主要涉及两方面的优化：</p>
<ul>
<li>最小化包</li>
<li>拆包</li>
</ul>
<h4 id="1-最小化包"><a href="#1-最小化包" class="headerlink" title="1. 最小化包"></a>1. 最小化包</h4><ul>
<li>使用 <code>optimization.removeAvailableModules</code> 删除已可用模块</li>
<li>使用 <code>optimization.removeEmptyChunks</code> 删除空模块</li>
<li>使用 <code>optimization.occurrenceOrder</code> 标记模块的加载顺序，使初始包更小</li>
<li>使用 <code>optimization.providedExports</code> 、 <code>optimization.usedExports</code> 、<code>concatenateModules</code> 、<code>optimization.sideEffects</code> 删除死代码</li>
<li>使用 <code>optimization.splitChunks</code> 提取公共包</li>
<li>使用 <code>optimization.minimizer</code> || <code>TerserPlugin</code> 来最小化包</li>
</ul>
<h4 id="2-拆包"><a href="#2-拆包" class="headerlink" title="2. 拆包"></a>2. 拆包</h4><p>当包过大时，如果我们更新一小部分的包内容，那么整个包都需要重新加载，如果我们把这个包拆分，那么我们仅仅需要重新加载发生内容变更的包，而不是所有包，有效的利用了缓存。</p>
<h5 id="拆分-node-modules"><a href="#拆分-node-modules" class="headerlink" title="拆分 node_modules"></a>拆分 node_modules</h5><p>很多情况下，我们不需要手动拆分包，可以使用 <code>optimization.splitChunks</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: path.resolve(__dirname, &#39;src&#x2F;index.js&#39;),</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class="line">    filename: &#39;[name].[contenthash].js&#39;,</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      &#x2F;&#x2F; 对所有的包进行拆分</span><br><span class="line">      chunks: &#39;all&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>我们不必制定拆包策略，<code>chunks: all</code> 会自动将 <code>node_modules</code> 中的所有内容放入一个名为 <code>vendors〜main.js</code> 的文件中。</p>
<h5 id="拆分业务代码"><a href="#拆分业务代码" class="headerlink" title="拆分业务代码"></a>拆分业务代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: path.resolve(__dirname, &#39;src&#x2F;index.js&#39;),</span><br><span class="line">    ProductList: path.resolve(__dirname, &#39;src&#x2F;ProductList&#x2F;ProductList.js&#39;),</span><br><span class="line">    ProductPage: path.resolve(__dirname, &#39;src&#x2F;ProductPage&#x2F;ProductPage.js&#39;),</span><br><span class="line">    Icon: path.resolve(__dirname, &#39;src&#x2F;Icon&#x2F;Icon.js&#39;),</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class="line">    filename: &#39;[name].[contenthash:8].js&#39;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>采用多入口的方式，当有业务代码更新时，更新相应的包即可</p>
<h5 id="拆分第三方库"><a href="#拆分第三方库" class="headerlink" title="拆分第三方库"></a>拆分第三方库</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);</span><br><span class="line">const webpack &#x3D; require(&#39;webpack&#39;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  entry: path.resolve(__dirname, &#39;src&#x2F;index.js&#39;),</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class="line">    filename: &#39;[name].[contenthash].js&#39;,</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    runtimeChunk: &#39;single&#39;,</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: &#39;all&#39;,</span><br><span class="line">      maxInitialRequests: Infinity,</span><br><span class="line">      minSize: 0,</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        vendor: &#123;</span><br><span class="line">          test: &#x2F;[\\&#x2F;]node_modules[\\&#x2F;]&#x2F;,</span><br><span class="line">          name(module) &#123;</span><br><span class="line">            &#x2F;&#x2F; 获取第三方包名</span><br><span class="line">            const packageName &#x3D; module.context.match(&#x2F;[\\&#x2F;]node_modules[\\&#x2F;](.*?)([\\&#x2F;]|$)&#x2F;)[1];</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F; npm 软件包名称是 URL 安全的，但是某些服务器不喜欢@符号</span><br><span class="line">            return &#96;npm.$&#123;packageName.replace(&#39;@&#39;, &#39;&#39;)&#125;&#96;;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>当第三方包更新时，仅更新相应的包即可。</p>
<p>注意，当包太多时，浏览器会发起更多的请求，并且当文件过小时，对代码压缩也有影响。</p>
<h5 id="动态加载"><a href="#动态加载" class="headerlink" title="动态加载"></a>动态加载</h5><p>现在我们已经对包拆分的很彻底了，但以上的拆分仅仅是对浏览器缓存方面的优化，减小首屏加载时间，实际上我们也可以使用按需加载的方式来进一步拆分，减小首屏加载时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, useEffect &#125; from &#39;react&#39;;</span><br><span class="line">import &#39;.&#x2F;index.scss&#39;</span><br><span class="line"></span><br><span class="line">function Main() &#123;</span><br><span class="line">  const [NeighborPage, setNeighborPage] &#x3D; useState(null)</span><br><span class="line"></span><br><span class="line">  useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    import(&#39;..&#x2F;neighbor&#39;).then((&#123; default: component &#125;) &#x3D;&gt; &#123;</span><br><span class="line">      setNeighborPage(React.createElement(component))</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  return NeighborPage</span><br><span class="line">    ? NeighborPage</span><br><span class="line">    : &lt;div&gt;Loading...&lt;&#x2F;div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Main</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="七、配置-plugin"><a href="#七、配置-plugin" class="headerlink" title="七、配置 plugin"></a>七、配置 plugin</h3><p>配置 Plugin 去处理及优化其它的需求，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    &#x2F;&#x2F; 优化 require</span><br><span class="line">    new webpack.ContextReplacementPlugin(&#x2F;moment[\&#x2F;\\]locale$&#x2F;, &#x2F;en|zh&#x2F;),</span><br><span class="line">    &#x2F;&#x2F; 用于提升构建速度</span><br><span class="line">    createHappyPlugin(&#39;happy-babel&#39;, [&#123;</span><br><span class="line">      loader: &#39;babel-loader&#39;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        presets: [&#39;@babel&#x2F;preset-env&#39;, &quot;@babel&#x2F;preset-react&quot;],</span><br><span class="line">        plugins: [</span><br><span class="line">          [&#39;@babel&#x2F;plugin-proposal-class-properties&#39;, &#123;</span><br><span class="line">            loose: true</span><br><span class="line">          &#125;]</span><br><span class="line">        ],</span><br><span class="line">        &#x2F;&#x2F; babel-loader 支持缓存转换出的结果，通过 cacheDirectory 选项开启</span><br><span class="line">        cacheDirectory: true,</span><br><span class="line">        &#x2F;&#x2F; Save disk space when time isn&#39;t as important</span><br><span class="line">        cacheCompression: true,</span><br><span class="line">        compact: true,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;])</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>常用 plugins：</p>
<ul>
<li><code>html-webpack-plugin</code>：生成 html 文件，并将包添加到 html 中</li>
<li><code>webpack-parallel-uglify-plugin</code>：压缩 js（多进程并行处理压缩）</li>
<li><code>happypack</code>：多线程loader，用于提升构建速度</li>
<li><code>hard-source-webpack-plugin</code>：为模块提供中间缓存步骤，显著提高打包速度</li>
<li><code>webpack-merge</code>：合并 webpack 配置</li>
<li><code>mini-css-extract-plugin</code>：抽离 css</li>
<li><code>optimize-css-assets-webpack-plugin</code>：压缩 css</li>
<li><code>add-asset-html-webpack-plugin</code>：将 JavaScript 或 CSS 资产添加到 html-webpack-plugin 生成的 HTML 中</li>
</ul>
<p>更多插件可见：<a href="https://webpack.js.org/plugins/" target="_blank" rel="noopener">plugins</a></p>
<h3 id="八、配置devtool：source-map"><a href="#八、配置devtool：source-map" class="headerlink" title="八、配置devtool：source map"></a>八、配置devtool：source map</h3><p>配置 webpack 如何生成 Source Map，用来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度：</p>
<p>生产环境：默认为 <code>null</code> ，一般不设置（ <code>none</code> ）或 <code>nosources-source-map</code></p>
<p>开发环境：默认为 <code>eval</code> ，一般设置为 <code>eval</code> 、 <code>cheap-eval-source-map</code> 、<code>cheap-module-eval-source-map</code></p>
<p><strong>策略为：</strong></p>
<ul>
<li><strong>使用 cheap 模式可以大幅提高 souremap 生成的效率。</strong> 没有列信息（会映射到转换后的代码，而不是映射到原始代码），通常我们调试并不关心列信息，而且就算 source map 没有列，有些浏览器引擎（例如 v8） 也会给出列信息。</li>
<li><strong>使用 eval 方式可大幅提高持续构建效率。</strong>参考官方文档提供的速度对比表格可以看到 eval 模式的编译速度很快。</li>
<li><strong>使用 module 可支持 babel 这种预编译工具</strong>（在 webpack 里做为 loader 使用）。</li>
</ul>
<p>如果默认的 webpack <code>minimizer</code> 已经被重定义(例如 <code>terser-webpack-plugin</code> )，你必须提供 <code>sourceMap：true</code> 选项来启用 source map 支持。</p>
<p>更多可查看：<a href="https://webpack.js.org/configuration/devtool/#devtool" target="_blank" rel="noopener">devtool</a></p>
<h3 id="九、配置性能-performance"><a href="#九、配置性能-performance" class="headerlink" title="九、配置性能 performance"></a>九、配置性能 performance</h3><p>当打包是出现超过特定文件限制的资产和入口点，<code>performance</code> 控制 webpack 如何通知：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; 配置如何显示性能提示</span><br><span class="line">  performance: &#123;</span><br><span class="line">    &#x2F;&#x2F; 可选 warning、error、false</span><br><span class="line">    &#x2F;&#x2F; false：性能设置,文件打包过大时，不报错和警告，只做提示</span><br><span class="line">    &#x2F;&#x2F; warning：显示警告，建议用在开发环境</span><br><span class="line">    &#x2F;&#x2F; error：显示错误，建议用在生产环境，防止部署太大的生产包，从而影响网页性能</span><br><span class="line">    hints: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="十、配置其它"><a href="#十、配置其它" class="headerlink" title="十、配置其它"></a>十、配置其它</h3><h4 id="1-watch-与-watchOptions"><a href="#1-watch-与-watchOptions" class="headerlink" title="1. watch 与 watchOptions"></a>1. watch 与 watchOptions</h4><h5 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h5><p>监视文件更新，并在文件更新时重新编译：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.export &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; 启用监听模式</span><br><span class="line">  watch: true,</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在 <code>webpack-dev-server</code> 和 <code>webpack-dev-middleware</code> 中，默认启用了监视模式。</p>
<p>或者我们可以在命令行里启动监听（ <code>--watch</code> ）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">webpack --watch --config webpack.config.dev.js</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h5 id="watchOptions"><a href="#watchOptions" class="headerlink" title="watchOptions"></a>watchOptions</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">module.export &#x3D; &#123;</span><br><span class="line">  watch: true,</span><br><span class="line">  &#x2F;&#x2F; 自定义监视模式</span><br><span class="line">  watchOptions: &#123;</span><br><span class="line">    &#x2F;&#x2F; 排除监听</span><br><span class="line">    ignored: &#x2F;node_modules&#x2F;,</span><br><span class="line">    &#x2F;&#x2F; 监听到变化发生后，延迟 300ms（默认） 再去执行动作，</span><br><span class="line">    &#x2F;&#x2F; 防止文件更新太快导致重新编译频率太高</span><br><span class="line">    aggregateTimeout: 300,</span><br><span class="line">    &#x2F;&#x2F; 判断文件是否发生变化是通过不停的去询问系统指定文件有没有变化实现的</span><br><span class="line">    &#x2F;&#x2F; 默认 1000ms 询问一次</span><br><span class="line">    poll: 1000</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="2-externals"><a href="#2-externals" class="headerlink" title="2. externals"></a>2. externals</h4><p>排除打包时的依赖项，不纳入打包范围内，例如你项目中使用了 <code>jquery</code> ，并且你在 html 中引入了它，那么在打包时就不需要再把它打包进去：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">  src&#x3D;&quot;https:&#x2F;&#x2F;code.jquery.com&#x2F;jquery-3.1.0.js&quot;</span><br><span class="line">  integrity&#x3D;&quot;sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk&#x3D;&quot;</span><br><span class="line">  crossorigin&#x3D;&quot;anonymous&quot;&gt;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; 打包时排除 jquery 模块</span><br><span class="line">  externals: &#123;</span><br><span class="line">    jquery: &#39;jQuery&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="3-target"><a href="#3-target" class="headerlink" title="3.target"></a>3.target</h4><p>构建目标，用于为 webpack 指定一个环境：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; 编译为类浏览器环境里可用（默认）</span><br><span class="line">  target: &#39;web&#39;</span><br><span class="line">&#125;;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="4-cache"><a href="#4-cache" class="headerlink" title="4. cache"></a>4. cache</h4><p>缓存生成的 webpack 模块和块以提高构建速度。在开发模式中，缓存设置为 <code>type: &#39;memory&#39;</code> ，在生产模式中禁用。<code>cache: true</code> 是 <code>cache: {type: &#39;memory&#39;}</code> 的别名。要禁用缓存传递 <code>false</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  cache: false</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>在内存中，缓存仅在监视模式下有用，并且我们假设你在开发中使用监视模式。 在不进行缓存的情况下，内存占用空间较小。</p>
<h4 id="5-name"><a href="#5-name" class="headerlink" title="5. name"></a>5. name</h4><p>配置的名称，用于加载多个配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  name: &#39;admin-app&#39;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h3 id="转载自掘金"><a href="#转载自掘金" class="headerlink" title="转载自掘金"></a>转载自掘金</h3><p>前端瓶子君</p>
<p><a href="https://juejin.im/post/5e0e1153e51d45414b74de65?utm_source=gold_browser_extension#heading-16" target="_blank" rel="noopener">https://juejin.im/post/5e0e1153e51d45414b74de65?utm_source=gold_browser_extension#heading-16</a></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2020-01-03T09:13:16.165Z" itemprop="dateUpdated">2020-01-03 17:13:16</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="/img/006Zw1yCly1fxmsomzdvoj30u016de83.jpg" alt="包寒">
            包寒
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&title=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&pic=http://yoursite.com/img/006Zw1yCly1fxmsomzdvoj30u016de83.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&title=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&source=个人博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&via=http://yoursite.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/01/04/git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">git常用指令</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/12/30/%E6%9E%84%E5%BB%BA%E5%A4%A7%E5%9E%8BVue-js%E9%A1%B9%E7%9B%AE%E7%9A%8410%E6%9D%A1%E5%BB%BA%E8%AE%AE/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">构建大型Vue-js项目的10条建议</h4>
      </a>
    </div>
  
</nav>



    




















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>包寒 &copy; 2015 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&title=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&pic=http://yoursite.com/img/006Zw1yCly1fxmsomzdvoj30u016de83.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&title=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&source=个人博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《webpack最佳配置指北》 — Baohan.Blog | 交流与分享&url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/&via=http://yoursite.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/2020/01/03/webpack%E6%9C%80%E4%BD%B3%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8C%97/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADLUlEQVR42u3aQW7jMBAEQP//095rgKyV7iENWHTpFMQyxaKATNjDxyO+nj+u379/df/1aL9HfjV+8unjHRc2Njb2TdjPy+vVA67vT56SwPKFyy3Y2NjYp7LboZPvtozrka8Xri6o2NjY2F/Mni1NXsCSxUqWABsbGxu7Jc1KUZ72tNsSbGxs7G9jJ2VmFgNdL0o75qwcYmNjY5/NXo/jP+fnt/S3sbGxsT+Y/SyvvcFTu/14brqwsbGxT2LnBSCP49tPV1rCs3YCNjY29kns9o9+e0CnjZDywGjpaBE2Njb2QexZKNNuJ9pAfxZsJYte121sbGzsm7BnB2vaIzvtAaC8fdseAMLGxsY+id1uOZJlagOp2bfajQc2Njb2qezZmZZkkzALhvJvtS8puhMbGxv7tuzZP/RJWJ+M/44Wb1TAsLGxsY9g7ypOCaxd3LY0Fi8JGxsb+yB2+8g6pmn3QHk3I24D/zFbbGxs7Juz24brSijfjj87ghO1H7CxsbEPZbfN15w6a9PmI+ft6v8UMGxsbOwj2G1JyEtXW8bWo6IohMLGxsY+iN1ee6eVbyGup5vDsLGxsc9jz0KZPO5ZD61WGhIv78TGxsY+jt0eu8lr4K6FmG0tipNK2NjY2LdlrzdlV+L7tvCsNIyxsbGxT2XnYfquiGfXwaBZizqaBDY2Nvat2LPNQxvxt02CpJS2LY3iJmxsbOzbsmdbhdkk1g/WzEraHzswbGxs7BuyZwUjj/Jnx3HaRcmbCkt1EhsbG/uD2W0hmS1N2zxoI61i5tjY2NgHsdcbvW1Dt90nzUYrNlfY2NjYR7DzspE0ZdvJ7dre5K8QGxsb+2z2rJi1ZW+lmsxeFTY2NvY3sFcm2m5O2gM9sxku9UawsbGxb8KeBfezqGhXsdwQh2FjY2MfxJ4VgJWC1x64aZsE7evBxsbGPoM9O0AzY+Tr/b6oCxsbG/tUdlsY8tZsHjC1jeHZwmFjY2NjzxoGeVNhpawW5RYbGxv7i9lJEVqBtVHXUn8bGxsb+yD2bMPQHspJQqhdIde2LA0bGxv749ltqVjpJ8/KXjLC+rOwsbGxb8j+B80SsLzwP5uBAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
